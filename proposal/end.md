## 项目信息

### 项目名称

一种基于 gRPC 的轻量级应用间双向通信框架

### 方案描述

基于 gRPC 协议开发一个轻量级的生产可用的 core-plugin 跨应用双向通信框架，这个框架应该是通用的，所有需要应用双向通信的项目都可以使用。

- 测试覆盖完备，要实现生产级别可靠必须经过较完备的测试，ut 覆盖率高；
- 日志完备，方便调试问题；
- 性能优异，轻量级；
- 容易使用，文档详细。

### 时间规划

#### 月规划

| 时间  |                            规划                             |
|:---:|:---------------------------------------------------------:|
| 7月  | 了解项目当前插件机制实现；学习 `Golang` `gRPC` `ProtoBuf` 等前置知识；开始搭建项目结构 |
| 8月  |       实现项目 `Core` `Plugin` 各模块的主要功能；编写单元测试；灵活变更方案选型       |
| 9月  |                细节完善；编写文档；调试Bug；开始尝试迁移原项目插件                |

### 周规划

7月

| 时间  |                                规划                                 |
|:---:|:-----------------------------------------------------------------:|
| 第一周 |  学习 `Golang` 网络相关知识；了解 `Golang` 原生 `Plugin` 实现痛点；实践网络编程，编写简单DEMO  |
| 第二周 |        学习 `gRPC` 框架，能够编写简单的 `C/S` DEMO；了解工业界当前 `gRPC` 最佳实践        |
| 第三周 | 学习 `ProtoBuf` ，能使用 `protoc-gen-go` 生成 `Golang` 代码；能够将其与 `gRPC` 结合 |
| 第四周 |                 开始搭建项目结构，按照方案设计各自结构体；与导师沟通项目结构可行性                 |

8月

| 时间  |                           规划                            |
|:---:|:-------------------------------------------------------:|
| 第五周 | 根据实际开发进程修改方案细节；实现 `Core.Serve` `Plugin.Mount` ；编写对应单元测试 |
| 第六周 |  实现 `Core.ExecRequest` `Plugin.ExecResponse` ；编写对应单元测试  |
| 第七周 | 实现 `HealthCheck`  `Log Service` `Plugin.Ping` ；编写对应单元测试 |
| 第八周 |          实现 `Codec` `MapConv` 等剩余部分代码；编写对应单元测试          |

9月

|  时间  |                       规划                        |
|:----:|:-----------------------------------------------:|
| 第九周  |           完善主要代码其他细节；优化代码实现；重构部分主要代码            |
| 第十周  | 编写 `README`  `Tutorial(可选)`；完善代码注释；与导师校对相关场景和需求 |
| 第十一周 |            编写 `Examples` ，调试程序，解决BUG            |
| 第十二周 |     开始尝试迁移 `DevStream` 原有插件，排查相关错误并优化代码、文档      |

## 项目总结

### 项目产出

|              计划              | 完成状况 |                       成果                        |
|:----------------------------:|:----:|:-----------------------------------------------:|
| Golang、Protobuf、gRPC 等前置知识学习 | 已完成  |               能够熟练运用相关技术栈进行gRPC开发               |
|            项目结构设计            | 已完成  |                按照方案设计完成项目结构设计与实现                |
|           项目主要代码实现           | 已完成  | 实现项目主要代码，包括 `Core` `Plugin` `Codec` `MapConv` 等 |
|            日志服务实现            | 已完成  |              实现日志服务，能够将插件日志输出到日志服务              |
|            项目测试代码            | 已完成  |               位于项目根目录 `test` 文件夹中               |
|            项目文档编写            | 已完成  |          产出 `README` `Examples` 等文档与示例          |
|            项目代码优化            | 已完成  |                  重构部分代码，优化代码实现                  |
|            项目代码注释            | 已完成  |                   对项目主要代码进行注释                   |

### 方案进度

截止第十一周及以前的进度已全部完成，代码已经向主仓库发起PR。接下来重心将放在迁移兼容性与可行性上，争取将所有插件无缝迁移至新插件系统。

### 遇到的问题及解决方案

- Golang 环境安装无法安装模块，最终通过设置模块代理 `GOPROXY` 解决。
- 安装 Protobuf 和对应的 Golang 插件

- 在项目开始初期，学习 Golang,Protobuf,gRPC 这些前置知识比较痛苦，内容很多，工程性很强，同时又没有产出，感觉有点焦虑。 最终还是坚持了下来，度过了最难的一关，当真正能把自己的知识用于实际项目中时，就会发现学习的过程是很有意思的，也会有很多收获。

- 在设计方案时，也遇到了一些问题，比如如何设计插件的配置，如何设计插件的日志服务，如何设计插件的健康检查等等。我调研了Golang的主流库设计，使代码尽可能优雅、健壮。

- 在并发知识上，一开始踩了许多坑，比如 `sync.Map`、`sync.WaitGroup` 的使用，`context` 的使用等等。后来通过阅读源码，以及与导师的讨论，逐渐掌握了相关知识。
- 初步代码完成后发现请求耗时非常高，有时甚至达到秒级，排查后发现是一处 `channel` 的用法错误和遗漏导致的。

- 测试也是一个比较大的问题，因为涉及到了并发和服务端、客户端的请求响应，所以编写比较困难。最终通过与导师的讨论，研究了类似场景下其他第三方库的测试写法，完成代码编写。

在项目进行的过程中固然会遇到一些阻碍和困难，但我相信最重要的就是持之以恒，不断钻研，最终才能收获满满。

### 项目完成质量

我认为项目完成质量还是比较高的，整体代码风格统一，符合Golang最佳实践，注释、文档完善，测试完善，代码结构清晰，可读性强，可维护性好。

虽然困难重重，但我对代码质量的要求不会降低。我特地阅读了Uber的Golang最佳实践文档以及其他优秀的Golang项目，使代码风格更加统一优雅。

对模块的设计也是非常重要的，我在设计时尽可能将代码分为多个包，分层设计，使代码更加清晰，易于维护。

### 与导师沟通及反馈情况

我与导师的沟通密切，几乎每周都会与导师进行一次沟通，讨论项目进度、遇到的问题、解决方案等等。导师也会在我遇到问题时给予我帮助，帮助我解决问题。

在一些代码设计上，导师也会给予我很多建议，为我讲解工程上的方法论，收获良多。

非常感谢导师的帮助，没有导师的帮助，我可能会止步不前而无法推进项目进度。
